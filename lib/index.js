!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).LGE=r()}(this,(function(){"use strict";var t=Array.isArray,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,r){return t(r={exports:{}},r.exports),r.exports}var n="object"==typeof r&&r&&r.Object===Object&&r,o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")(),s=i.Symbol,u=Object.prototype,c=u.hasOwnProperty,a=u.toString,h=s?s.toStringTag:void 0;var f=function(t){var r=c.call(t,h),e=t[h];try{t[h]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(r?t[h]=e:delete t[h]),o},l=Object.prototype.toString;var p=function(t){return l.call(t)},b="[object Null]",d="[object Undefined]",v=s?s.toStringTag:void 0;var y=function(t){return null==t?void 0===t?d:b:v&&v in Object(t)?f(t):p(t)};var _=function(t){return null!=t&&"object"==typeof t},g="[object Symbol]";var m=function(t){return"symbol"==typeof t||_(t)&&y(t)==g},w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;var O=function(r,e){if(t(r))return!1;var n=typeof r;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=r&&!m(r))||(j.test(r)||!w.test(r)||null!=e&&r in Object(e))};var E=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},S="[object AsyncFunction]",x="[object Function]",P="[object GeneratorFunction]",T="[object Proxy]";var A,z=function(t){if(!E(t))return!1;var r=y(t);return r==x||r==P||r==S||r==T},D=i["__core-js_shared__"],k=(A=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";var F=function(t){return!!k&&k in t},M=Function.prototype.toString;var I=function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""},N=/^\[object .+?Constructor\]$/,V=Function.prototype,H=Object.prototype,U=V.toString,$=H.hasOwnProperty,C=RegExp("^"+U.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var R=function(t){return!(!E(t)||F(t))&&(z(t)?C:N).test(I(t))};var B=function(t,r){return null==t?void 0:t[r]};var Y=function(t,r){var e=B(t,r);return R(e)?e:void 0},L=Y(Object,"create");var G=function(){this.__data__=L?L(null):{},this.size=0};var W=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},q="__lodash_hash_undefined__",J=Object.prototype.hasOwnProperty;var K=function(t){var r=this.__data__;if(L){var e=r[t];return e===q?void 0:e}return J.call(r,t)?r[t]:void 0},Q=Object.prototype.hasOwnProperty;var X=function(t){var r=this.__data__;return L?void 0!==r[t]:Q.call(r,t)},Z="__lodash_hash_undefined__";var tt=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=L&&void 0===r?Z:r,this};function rt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}rt.prototype.clear=G,rt.prototype.delete=W,rt.prototype.get=K,rt.prototype.has=X,rt.prototype.set=tt;var et=rt;var nt=function(){this.__data__=[],this.size=0};var ot=function(t,r){return t===r||t!=t&&r!=r};var it=function(t,r){for(var e=t.length;e--;)if(ot(t[e][0],r))return e;return-1},st=Array.prototype.splice;var ut=function(t){var r=this.__data__,e=it(r,t);return!(e<0)&&(e==r.length-1?r.pop():st.call(r,e,1),--this.size,!0)};var ct=function(t){var r=this.__data__,e=it(r,t);return e<0?void 0:r[e][1]};var at=function(t){return it(this.__data__,t)>-1};var ht=function(t,r){var e=this.__data__,n=it(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function ft(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ft.prototype.clear=nt,ft.prototype.delete=ut,ft.prototype.get=ct,ft.prototype.has=at,ft.prototype.set=ht;var lt=ft,pt=Y(i,"Map");var bt=function(){this.size=0,this.__data__={hash:new et,map:new(pt||lt),string:new et}};var dt=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var vt=function(t,r){var e=t.__data__;return dt(r)?e["string"==typeof r?"string":"hash"]:e.map};var yt=function(t){var r=vt(this,t).delete(t);return this.size-=r?1:0,r};var _t=function(t){return vt(this,t).get(t)};var gt=function(t){return vt(this,t).has(t)};var mt=function(t,r){var e=vt(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function wt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}wt.prototype.clear=bt,wt.prototype.delete=yt,wt.prototype.get=_t,wt.prototype.has=gt,wt.prototype.set=mt;var jt=wt,Ot="Expected a function";function Et(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(Ot);var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return e.cache=i.set(o,s)||i,s};return e.cache=new(Et.Cache||jt),e}Et.Cache=jt;var St=Et,xt=500;var Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tt=/\\(\\)?/g,At=function(t){var r=St(t,(function(t){return e.size===xt&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Pt,(function(t,e,n,o){r.push(n?o.replace(Tt,"$1"):e||t)})),r}));var zt=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},Dt=1/0,kt=s?s.prototype:void 0,Ft=kt?kt.toString:void 0;var Mt=function r(e){if("string"==typeof e)return e;if(t(e))return zt(e,r)+"";if(m(e))return Ft?Ft.call(e):"";var n=e+"";return"0"==n&&1/e==-Dt?"-0":n};var It=function(t){return null==t?"":Mt(t)};var Nt=function(r,e){return t(r)?r:O(r,e)?[r]:At(It(r))},Vt=1/0;var Ht=function(t){if("string"==typeof t||m(t))return t;var r=t+"";return"0"==r&&1/t==-Vt?"-0":r};var Ut=function(t,r){for(var e=0,n=(r=Nt(r,t)).length;null!=t&&e<n;)t=t[Ht(r[e++])];return e&&e==n?t:void 0};var $t=function(t,r,e){var n=null==t?void 0:Ut(t,r);return void 0===n?e:n};var Ct=function(){this.__data__=new lt,this.size=0};var Rt=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var Bt=function(t){return this.__data__.get(t)};var Yt=function(t){return this.__data__.has(t)},Lt=200;var Gt=function(t,r){var e=this.__data__;if(e instanceof lt){var n=e.__data__;if(!pt||n.length<Lt-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new jt(n)}return e.set(t,r),this.size=e.size,this};function Wt(t){var r=this.__data__=new lt(t);this.size=r.size}Wt.prototype.clear=Ct,Wt.prototype.delete=Rt,Wt.prototype.get=Bt,Wt.prototype.has=Yt,Wt.prototype.set=Gt;var qt=Wt,Jt="__lodash_hash_undefined__";var Kt=function(t){return this.__data__.set(t,Jt),this};var Qt=function(t){return this.__data__.has(t)};function Xt(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new jt;++r<e;)this.add(t[r])}Xt.prototype.add=Xt.prototype.push=Kt,Xt.prototype.has=Qt;var Zt=Xt;var tr=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1};var rr=function(t,r){return t.has(r)},er=1,nr=2;var or=function(t,r,e,n,o,i){var s=e&er,u=t.length,c=r.length;if(u!=c&&!(s&&c>u))return!1;var a=i.get(t);if(a&&i.get(r))return a==r;var h=-1,f=!0,l=e&nr?new Zt:void 0;for(i.set(t,r),i.set(r,t);++h<u;){var p=t[h],b=r[h];if(n)var d=s?n(b,p,h,r,t,i):n(p,b,h,t,r,i);if(void 0!==d){if(d)continue;f=!1;break}if(l){if(!tr(r,(function(t,r){if(!rr(l,r)&&(p===t||o(p,t,e,n,i)))return l.push(r)}))){f=!1;break}}else if(p!==b&&!o(p,b,e,n,i)){f=!1;break}}return i.delete(t),i.delete(r),f},ir=i.Uint8Array;var sr=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e};var ur=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e},cr=1,ar=2,hr="[object Boolean]",fr="[object Date]",lr="[object Error]",pr="[object Map]",br="[object Number]",dr="[object RegExp]",vr="[object Set]",yr="[object String]",_r="[object Symbol]",gr="[object ArrayBuffer]",mr="[object DataView]",wr=s?s.prototype:void 0,jr=wr?wr.valueOf:void 0;var Or=function(t,r,e,n,o,i,s){switch(e){case mr:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case gr:return!(t.byteLength!=r.byteLength||!i(new ir(t),new ir(r)));case hr:case fr:case br:return ot(+t,+r);case lr:return t.name==r.name&&t.message==r.message;case dr:case yr:return t==r+"";case pr:var u=sr;case vr:var c=n&cr;if(u||(u=ur),t.size!=r.size&&!c)return!1;var a=s.get(t);if(a)return a==r;n|=ar,s.set(t,r);var h=or(u(t),u(r),n,o,i,s);return s.delete(t),h;case _r:if(jr)return jr.call(t)==jr.call(r)}return!1};var Er=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t};var Sr=function(r,e,n){var o=e(r);return t(r)?o:Er(o,n(r))};var xr=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,i=[];++e<n;){var s=t[e];r(s,e,t)&&(i[o++]=s)}return i};var Pr=function(){return[]},Tr=Object.prototype.propertyIsEnumerable,Ar=Object.getOwnPropertySymbols,zr=Ar?function(t){return null==t?[]:(t=Object(t),xr(Ar(t),(function(r){return Tr.call(t,r)})))}:Pr;var Dr=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n},kr="[object Arguments]";var Fr=function(t){return _(t)&&y(t)==kr},Mr=Object.prototype,Ir=Mr.hasOwnProperty,Nr=Mr.propertyIsEnumerable,Vr=Fr(function(){return arguments}())?Fr:function(t){return _(t)&&Ir.call(t,"callee")&&!Nr.call(t,"callee")};var Hr=function(){return!1},Ur=e((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?i.Buffer:void 0,s=(o?o.isBuffer:void 0)||Hr;t.exports=s})),$r=9007199254740991,Cr=/^(?:0|[1-9]\d*)$/;var Rr=function(t,r){var e=typeof t;return!!(r=null==r?$r:r)&&("number"==e||"symbol"!=e&&Cr.test(t))&&t>-1&&t%1==0&&t<r},Br=9007199254740991;var Yr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Br},Lr={};Lr["[object Float32Array]"]=Lr["[object Float64Array]"]=Lr["[object Int8Array]"]=Lr["[object Int16Array]"]=Lr["[object Int32Array]"]=Lr["[object Uint8Array]"]=Lr["[object Uint8ClampedArray]"]=Lr["[object Uint16Array]"]=Lr["[object Uint32Array]"]=!0,Lr["[object Arguments]"]=Lr["[object Array]"]=Lr["[object ArrayBuffer]"]=Lr["[object Boolean]"]=Lr["[object DataView]"]=Lr["[object Date]"]=Lr["[object Error]"]=Lr["[object Function]"]=Lr["[object Map]"]=Lr["[object Number]"]=Lr["[object Object]"]=Lr["[object RegExp]"]=Lr["[object Set]"]=Lr["[object String]"]=Lr["[object WeakMap]"]=!1;var Gr=function(t){return _(t)&&Yr(t.length)&&!!Lr[y(t)]};var Wr=function(t){return function(r){return t(r)}},qr=e((function(t,r){var e=r&&!r.nodeType&&r,o=e&&t&&!t.nodeType&&t,i=o&&o.exports===e&&n.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=s})),Jr=qr&&qr.isTypedArray,Kr=Jr?Wr(Jr):Gr,Qr=Object.prototype.hasOwnProperty;var Xr=function(r,e){var n=t(r),o=!n&&Vr(r),i=!n&&!o&&Ur(r),s=!n&&!o&&!i&&Kr(r),u=n||o||i||s,c=u?Dr(r.length,String):[],a=c.length;for(var h in r)!e&&!Qr.call(r,h)||u&&("length"==h||i&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Rr(h,a))||c.push(h);return c},Zr=Object.prototype;var te=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||Zr)};var re=function(t,r){return function(e){return t(r(e))}}(Object.keys,Object),ee=Object.prototype.hasOwnProperty;var ne=function(t){if(!te(t))return re(t);var r=[];for(var e in Object(t))ee.call(t,e)&&"constructor"!=e&&r.push(e);return r};var oe=function(t){return null!=t&&Yr(t.length)&&!z(t)};var ie=function(t){return oe(t)?Xr(t):ne(t)};var se=function(t){return Sr(t,ie,zr)},ue=1,ce=Object.prototype.hasOwnProperty;var ae=function(t,r,e,n,o,i){var s=e&ue,u=se(t),c=u.length;if(c!=se(r).length&&!s)return!1;for(var a=c;a--;){var h=u[a];if(!(s?h in r:ce.call(r,h)))return!1}var f=i.get(t);if(f&&i.get(r))return f==r;var l=!0;i.set(t,r),i.set(r,t);for(var p=s;++a<c;){var b=t[h=u[a]],d=r[h];if(n)var v=s?n(d,b,h,r,t,i):n(b,d,h,t,r,i);if(!(void 0===v?b===d||o(b,d,e,n,i):v)){l=!1;break}p||(p="constructor"==h)}if(l&&!p){var y=t.constructor,_=r.constructor;y!=_&&"constructor"in t&&"constructor"in r&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(l=!1)}return i.delete(t),i.delete(r),l},he=Y(i,"DataView"),fe=Y(i,"Promise"),le=Y(i,"Set"),pe=Y(i,"WeakMap"),be=I(he),de=I(pt),ve=I(fe),ye=I(le),_e=I(pe),ge=y;(he&&"[object DataView]"!=ge(new he(new ArrayBuffer(1)))||pt&&"[object Map]"!=ge(new pt)||fe&&"[object Promise]"!=ge(fe.resolve())||le&&"[object Set]"!=ge(new le)||pe&&"[object WeakMap]"!=ge(new pe))&&(ge=function(t){var r=y(t),e="[object Object]"==r?t.constructor:void 0,n=e?I(e):"";if(n)switch(n){case be:return"[object DataView]";case de:return"[object Map]";case ve:return"[object Promise]";case ye:return"[object Set]";case _e:return"[object WeakMap]"}return r});var me=ge,we=1,je="[object Arguments]",Oe="[object Array]",Ee="[object Object]",Se=Object.prototype.hasOwnProperty;var xe=function(r,e,n,o,i,s){var u=t(r),c=t(e),a=u?Oe:me(r),h=c?Oe:me(e),f=(a=a==je?Ee:a)==Ee,l=(h=h==je?Ee:h)==Ee,p=a==h;if(p&&Ur(r)){if(!Ur(e))return!1;u=!0,f=!1}if(p&&!f)return s||(s=new qt),u||Kr(r)?or(r,e,n,o,i,s):Or(r,e,a,n,o,i,s);if(!(n&we)){var b=f&&Se.call(r,"__wrapped__"),d=l&&Se.call(e,"__wrapped__");if(b||d){var v=b?r.value():r,y=d?e.value():e;return s||(s=new qt),i(v,y,n,o,s)}}return!!p&&(s||(s=new qt),ae(r,e,n,o,i,s))};var Pe=function t(r,e,n,o,i){return r===e||(null==r||null==e||!_(r)&&!_(e)?r!=r&&e!=e:xe(r,e,n,o,t,i))};var Te=function(t,r){return Pe(t,r)},Ae=Array.prototype.reverse;var ze=function(t){return null==t?t:Ae.call(t)},De=function(t,r){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */function ke(t,r){function e(){this.constructor=t}De(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function Fe(t){return"function"==typeof t}var Me=!1,Ie={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;Me=t},get useDeprecatedSynchronousErrorHandling(){return Me}};function Ne(t){setTimeout((function(){throw t}),0)}var Ve={closed:!0,next:function(t){},error:function(t){if(Ie.useDeprecatedSynchronousErrorHandling)throw t;Ne(t)},complete:function(){}},He=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();var Ue=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),$e=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var r;if(!this.closed){var e,n=this._parentOrParents,o=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s){n[s].remove(this)}if(Fe(o))try{o.call(this)}catch(t){r=t instanceof Ue?Ce(t.errors):[t]}if(He(i)){s=-1;for(var u=i.length;++s<u;){var c=i[s];if(null!==(e=c)&&"object"==typeof e)try{c.unsubscribe()}catch(t){r=r||[],t instanceof Ue?r=r.concat(Ce(t.errors)):r.push(t)}}}if(r)throw new Ue(r)}},t.prototype.add=function(r){var e=r;if(!r)return t.EMPTY;switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var o=e._parentOrParents;if(null===o)e._parentOrParents=this;else if(o instanceof t){if(o===this)return e;e._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return e;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[e]:i.push(e),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Ce(t){return t.reduce((function(t,r){return t.concat(r instanceof Ue?r.errors:r)}),[])}var Re=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Be=function(t){function r(e,n,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=Ve;break;case 1:if(!e){i.destination=Ve;break}if("object"==typeof e){e instanceof r?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new Ye(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new Ye(i,e,n,o)}return i}return ke(r,t),r.prototype[Re]=function(){return this},r.create=function(t,e,n){var o=new r(t,e,n);return o.syncErrorThrowable=!1,o},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},r}($e),Ye=function(t){function r(r,e,n,o){var i,s=t.call(this)||this;s._parentSubscriber=r;var u=s;return Fe(e)?i=e:e&&(i=e.next,n=e.error,o=e.complete,e!==Ve&&(Fe((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=n,s._complete=o,s}return ke(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;Ie.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=Ie.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):Ne(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;Ne(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};Ie.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),Ie.useDeprecatedSynchronousErrorHandling)throw t;Ne(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!Ie.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return Ie.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Ne(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(Be);var Le=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Ge(t){return t}function We(t){return 0===t.length?Ge:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var qe=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,o=function(t,r,e){if(t){if(t instanceof Be)return t;if(t[Re])return t[Re]()}return t||r||e?new Be(t,r,e):new Be(Ve)}(t,r,e);if(n?o.add(n.call(o,this.source)):o.add(this.source||Ie.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Ie.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){Ie.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,o=r.isStopped;if(e||o)return!1;t=n&&n instanceof Be?n:null}return!0}(t)?console.warn(r):t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=Je(r))((function(r,n){var o;o=e.subscribe((function(r){try{t(r)}catch(t){n(t),o&&o.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[Le]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:We(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=Je(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function Je(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var Ke,Qe=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Xe=function(t){function r(r,e){var n=t.call(this)||this;return n.subject=r,n.subscriber=e,n.closed=!1,n}return ke(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}($e),Ze=function(t){function r(r){var e=t.call(this,r)||this;return e.destination=r,e}return ke(r,t),r}(Be),tn=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return ke(r,t),r.prototype[Re]=function(){return new Ze(this)},r.prototype.lift=function(t){var r=new rn(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new Qe;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].next(t)},r.prototype.error=function(t){if(this.closed)throw new Qe;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new Qe;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new Qe;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new Qe;return this.hasError?(t.error(this.thrownError),$e.EMPTY):this.isStopped?(t.complete(),$e.EMPTY):(this.observers.push(t),new Xe(this,t))},r.prototype.asObservable=function(){var t=new qe;return t.source=this,t},r.create=function(t,r){return new rn(t,r)},r}(qe),rn=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return ke(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):$e.EMPTY},r}(tn),en=function(t){function r(r){var e=t.call(this)||this;return e._value=r,e}return ke(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return e&&!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Qe;return this._value},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(tn),nn=e((function(t,r){var e;void 0!==(e=function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.permute=function t(r,e,n,o){void 0===r&&(r={}),e||(e=Object.keys(r)),n||(n={}),o||(o=[]);var i,s,u,c,a,h=Object.keys(r),f=function(){if(null==n[h[i]]){var f=r[h[i]];for(s=0;s<f.length;s++)!function(r,e,n,o,l){u=!1,l=r[h[i]].slice(s+1,r[h[i]].length),r[h[i]]=l,(c=Object.assign({},n))[h[i]]=f[s],Object.keys(c).length==e.length&&(u=!0),u&&(o.push(c),c={}),0==(a=Object.assign({},r))[h[i]].length&&delete a[h[i]],!u&&Object.keys(a).length>0&&t(a,e,c,o)}(r,e,n,o,void 0)}};for(i=0;i<h.length;i++)f();return o}}(0,r))&&(t.exports=e)})),on=(Ke=nn)&&Ke.__esModule&&Object.prototype.hasOwnProperty.call(Ke,"default")?Ke.default:Ke,sn=s?s.isConcatSpreadable:void 0;var un=function(r){return t(r)||Vr(r)||!!(sn&&r&&r[sn])};var cn=function t(r,e,n,o,i){var s=-1,u=r.length;for(n||(n=un),i||(i=[]);++s<u;){var c=r[s];e>0&&n(c)?e>1?t(c,e-1,n,o,i):Er(i,c):o||(i[i.length]=c)}return i};var an=function(t){return(null==t?0:t.length)?cn(t,1):[]};class hn{constructor(t,r,e){this.grid=r,this.name=$t(t,"name",e),"radius"in t?(this.max=$t(t,"radius"),this.min=-this.max):"size"in t?(this.max=$t(t,"size"),this.min=0):(this.min=$t(t,"min",Number.NEGATIVE_INFINITY),this.max=$t(t,"max",Number.POSITIVE_INFINITY))}inRange(t){return t<=this.max&&t>=this.min}get extent(){return 1+this.max-this.min}}return{Grid:class{constructor(t,...r){this.dims=[],Array.isArray(t)?t.forEach((t,r)=>this.addDim(t,r)):[t,...r].forEach((t,r)=>this.addDim(t,r)),this.storage="sparse"}validPoint(t){if(!this.validCoordinate(t))return!1;for(let r=0;r<this.dims.length;++r){const e=this.dims[r];if(!this.dims[r].inRange(t[e.name]))return!1}return!0}validCoordinate(t){return"object"==typeof t&&this.dimNames.reduce((r,e)=>r&&e in t,!0)}get dims(){return this._dims||(this._dims=[]),this._dims}get dimNames(){return this.dims.map(({name:t})=>t)}set dims(t){this._dims=[]}get seedFunction(){return this._seedFunction}set seedFunction(t){this._seedFunction=t}get storage(){return this._storage}set storage(t){this._storage=t;let r=[];switch(t){case"sparse":r=new Map;break;case"dense":r=[]}this._store=r}get store(){return this._store}get(t){let r=t;return"number"!=typeof r&&(r=this.flatten(t)),null===r?null:"sparse"===this.storage?(this.seedFunction&&!this._store.has(r)&&this.seedFunction&&this._store.set(r,this.seedFunction(r,this)),this._store.get(r)):"dense"===this.storage?(this.seedFunction&&(this._store.length<r||void 0===this._store[r])&&(this._store[r]=this.seedFunction(r,this)),this._store[r]):null}set(t,r){let e=t,n=t;if("number"!=typeof n?n=this.flatten(t):e=null,null===n)return;"sparse"===this.storage&&this._store.set(n,r),"dense"===this.storage&&(this._store[n]=r);const o=this.get(n);Te(o,e)||(this._changes&&(e||(e=this.unflatten(n)),this.changes.next({coord:e,value:r,prev:o,grid:this})),this._subject&&this._subject.next(this))}near(t,r=!1){if(!this.validCoordinate(t))return[];if("number"==typeof t&&(t=this.unflatten(t)),r)return an(this.dimNames.map(r=>[{...t,[r]:t[r]+1},{...t,[r]:t[r]-1}]));const e=this.dimNames.map(r=>({[r]:[t[r]-1,t[r],t[r]+1]})).reduce((t,r)=>Object.assign(t,r),{});return on.permute(e)}addDim(t,r=0){this.dims.push(new hn(t,this,r))}weight(t){return t>=0?this.dims[t].extent*this.weight(t-1):1}flatten(t){return this.dims.reduce((r,e,n)=>{if(null===r)return r;const{name:o,min:i}=e,s=o in t?t[o]:i;return e.inRange(s)?r+(s-i)*this.weight(n-1):null},0)}unflatten(t){return ze([...this.dims]).reduce(([t,r],e,n)=>{if(null===t)return[null];const{name:o,min:i}=e;if(n===this.dims.length-1)return[{...t,[o]:r+i},0];const s=this.dims.length-n-2,u=this.weight(s),c=Math.floor(r/u);return[{...t,[o]:c+i},r-c*u]},[{},t])[0]}get changes(){return this._changes||(this._changes=new tn),this._changes}subject(){return this._subject||(this._subject=new en(this)),this._subject}}}}));
