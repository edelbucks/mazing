!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).LGE=e()}(this,(function(){"use strict";var t=Array.isArray,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,i=r||n||Function("return this")(),o=i.Symbol,s=Object.prototype,a=s.hasOwnProperty,u=s.toString,c=o?o.toStringTag:void 0;var h=function(t){var e=a.call(t,c),r=t[c];try{t[c]=void 0;var n=!0}catch(t){}var i=u.call(t);return n&&(e?t[c]=r:delete t[c]),i},l=Object.prototype.toString;var f=function(t){return l.call(t)},p="[object Null]",v="[object Undefined]",d=o?o.toStringTag:void 0;var _=function(t){return null==t?void 0===t?v:p:d&&d in Object(t)?h(t):f(t)};var y=function(t){return null!=t&&"object"==typeof t},g="[object Symbol]";var m=function(t){return"symbol"==typeof t||y(t)&&_(t)==g},b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;var w=function(e,r){if(t(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!m(e))||(j.test(e)||!b.test(e)||null!=r&&e in Object(r))};var O=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},F="[object AsyncFunction]",x="[object Function]",z="[object GeneratorFunction]",S="[object Proxy]";var A,E=function(t){if(!O(t))return!1;var e=_(t);return e==x||e==z||e==F||e==S},I=i["__core-js_shared__"],T=(A=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";var $=function(t){return!!T&&T in t},N=Function.prototype.toString;var P=function(t){if(null!=t){try{return N.call(t)}catch(t){}try{return t+""}catch(t){}}return""},C=/^\[object .+?Constructor\]$/,G=Function.prototype,R=Object.prototype,k=G.toString,D=R.hasOwnProperty,M=RegExp("^"+k.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var V=function(t){return!(!O(t)||$(t))&&(E(t)?M:C).test(P(t))};var Y=function(t,e){return null==t?void 0:t[e]};var L=function(t,e){var r=Y(t,e);return V(r)?r:void 0},U=L(Object,"create");var q=function(){this.__data__=U?U(null):{},this.size=0};var B=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},H="__lodash_hash_undefined__",J=Object.prototype.hasOwnProperty;var K=function(t){var e=this.__data__;if(U){var r=e[t];return r===H?void 0:r}return J.call(e,t)?e[t]:void 0},Q=Object.prototype.hasOwnProperty;var W=function(t){var e=this.__data__;return U?void 0!==e[t]:Q.call(e,t)},X="__lodash_hash_undefined__";var Z=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=U&&void 0===e?X:e,this};function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tt.prototype.clear=q,tt.prototype.delete=B,tt.prototype.get=K,tt.prototype.has=W,tt.prototype.set=Z;var et=tt;var rt=function(){this.__data__=[],this.size=0};var nt=function(t,e){return t===e||t!=t&&e!=e};var it=function(t,e){for(var r=t.length;r--;)if(nt(t[r][0],e))return r;return-1},ot=Array.prototype.splice;var st=function(t){var e=this.__data__,r=it(e,t);return!(r<0)&&(r==e.length-1?e.pop():ot.call(e,r,1),--this.size,!0)};var at=function(t){var e=this.__data__,r=it(e,t);return r<0?void 0:e[r][1]};var ut=function(t){return it(this.__data__,t)>-1};var ct=function(t,e){var r=this.__data__,n=it(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function ht(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ht.prototype.clear=rt,ht.prototype.delete=st,ht.prototype.get=at,ht.prototype.has=ut,ht.prototype.set=ct;var lt=ht,ft=L(i,"Map");var pt=function(){this.size=0,this.__data__={hash:new et,map:new(ft||lt),string:new et}};var vt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var dt=function(t,e){var r=t.__data__;return vt(e)?r["string"==typeof e?"string":"hash"]:r.map};var _t=function(t){var e=dt(this,t).delete(t);return this.size-=e?1:0,e};var yt=function(t){return dt(this,t).get(t)};var gt=function(t){return dt(this,t).has(t)};var mt=function(t,e){var r=dt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function bt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}bt.prototype.clear=pt,bt.prototype.delete=_t,bt.prototype.get=yt,bt.prototype.has=gt,bt.prototype.set=mt;var jt=bt,wt="Expected a function";function Ot(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(wt);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ot.Cache||jt),r}Ot.Cache=jt;var Ft=Ot,xt=500;var zt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/\\(\\)?/g,At=function(t){var e=Ft(t,(function(t){return r.size===xt&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(zt,(function(t,r,n,i){e.push(n?i.replace(St,"$1"):r||t)})),e}));var Et=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},It=1/0,Tt=o?o.prototype:void 0,$t=Tt?Tt.toString:void 0;var Nt=function e(r){if("string"==typeof r)return r;if(t(r))return Et(r,e)+"";if(m(r))return $t?$t.call(r):"";var n=r+"";return"0"==n&&1/r==-It?"-0":n};var Pt=function(t){return null==t?"":Nt(t)};var Ct=function(e,r){return t(e)?e:w(e,r)?[e]:At(Pt(e))},Gt=1/0;var Rt=function(t){if("string"==typeof t||m(t))return t;var e=t+"";return"0"==e&&1/t==-Gt?"-0":e};var kt=function(t,e){for(var r=0,n=(e=Ct(e,t)).length;null!=t&&r<n;)t=t[Rt(e[r++])];return r&&r==n?t:void 0};var Dt=function(t,e,r){var n=null==t?void 0:kt(t,e);return void 0===n?r:n},Mt=Array.prototype.reverse;var Vt=function(t){return null==t?t:Mt.call(t)};class Yt{constructor(t,e,r){this.grid=e,this.name=Dt(t,"name",r),"radius"in t?(this.max=Dt(t,"radius"),this.min=-this.max):"size"in t?(this.max=Dt(t,"size"),this.min=0):(this.min=Dt(t,"min",Number.NEGATIVE_INFINITY),this.max=Dt(t,"max",Number.POSITIVE_INFINITY))}inRange(t){return t<=this.max&&t>=this.min}get extent(){return 1+this.max-this.min}}return{Grid:class{constructor(t,...e){this.dims=[],Array.isArray(t)?t.forEach((t,e)=>this.addDim(t,e)):[t,...e].forEach((t,e)=>this.addDim(t,e)),this.storage="sparse"}get seedFunction(){return this._seedFunction}set seedFunction(t){this._seedFunction=t}get storage(){return this._storage}set storage(t){this._storage=t;let e=[];switch(t){case"sparse":e=new Map;break;case"dense":e=[]}this._store=e}get store(){return this._store}get(t){let e=t;return"number"!=typeof e&&(e=this.flatten(t)),null===e?null:"sparse"===this.storage?(this.seedFunction&&!this._store.has(e)&&this.seedFunction&&this._store.set(e,this.seedFunction(e,this)),this._store.get(e)):"dense"===this.storage?(this.seedFunction&&(this._store.length<e||void 0===this._store[e])&&(this._store[e]=this.seedFunction(e,this)),this._store[e]):null}set(t,e){let r=t;"number"!=typeof r&&(r=this.flatten(t)),null!==r&&("sparse"===this.storage&&this._store.set(r,e),"dense"===this.storage&&(this._store[r]=e))}addDim(t,e=0){this.dims.push(new Yt(t,this,e))}weight(t){return t>=0?this.dims[t].extent*this.weight(t-1):1}flatten(t){return this.dims.reduce((e,r,n)=>{if(null===e)return e;const{name:i,min:o}=r,s=i in t?t[i]:o;return r.inRange(s)?e+(s-o)*this.weight(n-1):null},0)}unflatten(t){return Vt([...this.dims]).reduce(([t,e],r,n)=>{if(null===t)return[null];const{name:i,min:o}=r;if(n===this.dims.length-1)return[{...t,[i]:e+o},0];const s=this.dims.length-n-2,a=this.weight(s),u=Math.floor(e/a);return[{...t,[i]:u+o},e-u*a]},[{},t])[0]}}}}));
