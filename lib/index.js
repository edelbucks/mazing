!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).LGE=r()}(this,(function(){"use strict";var t=Array.isArray,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,r){return t(r={exports:{}},r.exports),r.exports}var n="object"==typeof r&&r&&r.Object===Object&&r,i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")(),s=o.Symbol,u=Object.prototype,a=u.hasOwnProperty,c=u.toString,f=s?s.toStringTag:void 0;var h=function(t){var r=a.call(t,f),e=t[f];try{t[f]=void 0;var n=!0}catch(t){}var i=c.call(t);return n&&(r?t[f]=e:delete t[f]),i},l=Object.prototype.toString;var p=function(t){return l.call(t)},d="[object Null]",v="[object Undefined]",b=s?s.toStringTag:void 0;var y=function(t){return null==t?void 0===t?v:d:b&&b in Object(t)?h(t):p(t)};var _=function(t){return null!=t&&"object"==typeof t},g="[object Symbol]";var m=function(t){return"symbol"==typeof t||_(t)&&y(t)==g},w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;var E=function(r,e){if(t(r))return!1;var n=typeof r;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=r&&!m(r))||(j.test(r)||!w.test(r)||null!=e&&r in Object(e))};var O=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},S="[object AsyncFunction]",x="[object Function]",P="[object GeneratorFunction]",A="[object Proxy]";var T,z=function(t){if(!O(t))return!1;var r=y(t);return r==x||r==P||r==S||r==A},M=o["__core-js_shared__"],N=(T=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";var k=function(t){return!!N&&N in t},D=Function.prototype.toString;var F=function(t){if(null!=t){try{return D.call(t)}catch(t){}try{return t+""}catch(t){}}return""},I=/^\[object .+?Constructor\]$/,$=Function.prototype,V=Object.prototype,U=$.toString,H=V.hasOwnProperty,R=RegExp("^"+U.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var C=function(t){return!(!O(t)||k(t))&&(z(t)?R:I).test(F(t))};var L=function(t,r){return null==t?void 0:t[r]};var B=function(t,r){var e=L(t,r);return C(e)?e:void 0},Y=B(Object,"create");var G=function(){this.__data__=Y?Y(null):{},this.size=0};var W=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},q="__lodash_hash_undefined__",J=Object.prototype.hasOwnProperty;var K=function(t){var r=this.__data__;if(Y){var e=r[t];return e===q?void 0:e}return J.call(r,t)?r[t]:void 0},Q=Object.prototype.hasOwnProperty;var X=function(t){var r=this.__data__;return Y?void 0!==r[t]:Q.call(r,t)},Z="__lodash_hash_undefined__";var tt=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Y&&void 0===r?Z:r,this};function rt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}rt.prototype.clear=G,rt.prototype.delete=W,rt.prototype.get=K,rt.prototype.has=X,rt.prototype.set=tt;var et=rt;var nt=function(){this.__data__=[],this.size=0};var it=function(t,r){return t===r||t!=t&&r!=r};var ot=function(t,r){for(var e=t.length;e--;)if(it(t[e][0],r))return e;return-1},st=Array.prototype.splice;var ut=function(t){var r=this.__data__,e=ot(r,t);return!(e<0)&&(e==r.length-1?r.pop():st.call(r,e,1),--this.size,!0)};var at=function(t){var r=this.__data__,e=ot(r,t);return e<0?void 0:r[e][1]};var ct=function(t){return ot(this.__data__,t)>-1};var ft=function(t,r){var e=this.__data__,n=ot(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function ht(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ht.prototype.clear=nt,ht.prototype.delete=ut,ht.prototype.get=at,ht.prototype.has=ct,ht.prototype.set=ft;var lt=ht,pt=B(o,"Map");var dt=function(){this.size=0,this.__data__={hash:new et,map:new(pt||lt),string:new et}};var vt=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var bt=function(t,r){var e=t.__data__;return vt(r)?e["string"==typeof r?"string":"hash"]:e.map};var yt=function(t){var r=bt(this,t).delete(t);return this.size-=r?1:0,r};var _t=function(t){return bt(this,t).get(t)};var gt=function(t){return bt(this,t).has(t)};var mt=function(t,r){var e=bt(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function wt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}wt.prototype.clear=dt,wt.prototype.delete=yt,wt.prototype.get=_t,wt.prototype.has=gt,wt.prototype.set=mt;var jt=wt,Et="Expected a function";function Ot(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(Et);var e=function(){var n=arguments,i=r?r.apply(this,n):n[0],o=e.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return e.cache=o.set(i,s)||o,s};return e.cache=new(Ot.Cache||jt),e}Ot.Cache=jt;var St=Ot,xt=500;var Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,At=/\\(\\)?/g,Tt=function(t){var r=St(t,(function(t){return e.size===xt&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Pt,(function(t,e,n,i){r.push(n?i.replace(At,"$1"):e||t)})),r}));var zt=function(t,r){for(var e=-1,n=null==t?0:t.length,i=Array(n);++e<n;)i[e]=r(t[e],e,t);return i},Mt=1/0,Nt=s?s.prototype:void 0,kt=Nt?Nt.toString:void 0;var Dt=function r(e){if("string"==typeof e)return e;if(t(e))return zt(e,r)+"";if(m(e))return kt?kt.call(e):"";var n=e+"";return"0"==n&&1/e==-Mt?"-0":n};var Ft=function(t){return null==t?"":Dt(t)};var It=function(r,e){return t(r)?r:E(r,e)?[r]:Tt(Ft(r))},$t=1/0;var Vt=function(t){if("string"==typeof t||m(t))return t;var r=t+"";return"0"==r&&1/t==-$t?"-0":r};var Ut=function(t,r){for(var e=0,n=(r=It(r,t)).length;null!=t&&e<n;)t=t[Vt(r[e++])];return e&&e==n?t:void 0};var Ht=function(t,r,e){var n=null==t?void 0:Ut(t,r);return void 0===n?e:n},Rt=NaN,Ct=/^\s+|\s+$/g,Lt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Yt=/^0o[0-7]+$/i,Gt=parseInt;var Wt=function(t){if("number"==typeof t)return t;if(m(t))return Rt;if(O(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=O(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ct,"");var e=Bt.test(t);return e||Yt.test(t)?Gt(t.slice(2),e?2:8):Lt.test(t)?Rt:+t},qt=1/0,Jt=17976931348623157e292;var Kt=function(t){return t?(t=Wt(t))===qt||t===-qt?(t<0?-1:1)*Jt:t==t?t:0:0===t?t:0};var Qt=function(){this.__data__=new lt,this.size=0};var Xt=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var Zt=function(t){return this.__data__.get(t)};var tr=function(t){return this.__data__.has(t)},rr=200;var er=function(t,r){var e=this.__data__;if(e instanceof lt){var n=e.__data__;if(!pt||n.length<rr-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new jt(n)}return e.set(t,r),this.size=e.size,this};function nr(t){var r=this.__data__=new lt(t);this.size=r.size}nr.prototype.clear=Qt,nr.prototype.delete=Xt,nr.prototype.get=Zt,nr.prototype.has=tr,nr.prototype.set=er;var ir=nr,or="__lodash_hash_undefined__";var sr=function(t){return this.__data__.set(t,or),this};var ur=function(t){return this.__data__.has(t)};function ar(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new jt;++r<e;)this.add(t[r])}ar.prototype.add=ar.prototype.push=sr,ar.prototype.has=ur;var cr=ar;var fr=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1};var hr=function(t,r){return t.has(r)},lr=1,pr=2;var dr=function(t,r,e,n,i,o){var s=e&lr,u=t.length,a=r.length;if(u!=a&&!(s&&a>u))return!1;var c=o.get(t);if(c&&o.get(r))return c==r;var f=-1,h=!0,l=e&pr?new cr:void 0;for(o.set(t,r),o.set(r,t);++f<u;){var p=t[f],d=r[f];if(n)var v=s?n(d,p,f,r,t,o):n(p,d,f,t,r,o);if(void 0!==v){if(v)continue;h=!1;break}if(l){if(!fr(r,(function(t,r){if(!hr(l,r)&&(p===t||i(p,t,e,n,o)))return l.push(r)}))){h=!1;break}}else if(p!==d&&!i(p,d,e,n,o)){h=!1;break}}return o.delete(t),o.delete(r),h},vr=o.Uint8Array;var br=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e};var yr=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e},_r=1,gr=2,mr="[object Boolean]",wr="[object Date]",jr="[object Error]",Er="[object Map]",Or="[object Number]",Sr="[object RegExp]",xr="[object Set]",Pr="[object String]",Ar="[object Symbol]",Tr="[object ArrayBuffer]",zr="[object DataView]",Mr=s?s.prototype:void 0,Nr=Mr?Mr.valueOf:void 0;var kr=function(t,r,e,n,i,o,s){switch(e){case zr:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case Tr:return!(t.byteLength!=r.byteLength||!o(new vr(t),new vr(r)));case mr:case wr:case Or:return it(+t,+r);case jr:return t.name==r.name&&t.message==r.message;case Sr:case Pr:return t==r+"";case Er:var u=br;case xr:var a=n&_r;if(u||(u=yr),t.size!=r.size&&!a)return!1;var c=s.get(t);if(c)return c==r;n|=gr,s.set(t,r);var f=dr(u(t),u(r),n,i,o,s);return s.delete(t),f;case Ar:if(Nr)return Nr.call(t)==Nr.call(r)}return!1};var Dr=function(t,r){for(var e=-1,n=r.length,i=t.length;++e<n;)t[i+e]=r[e];return t};var Fr=function(r,e,n){var i=e(r);return t(r)?i:Dr(i,n(r))};var Ir=function(t,r){for(var e=-1,n=null==t?0:t.length,i=0,o=[];++e<n;){var s=t[e];r(s,e,t)&&(o[i++]=s)}return o};var $r=function(){return[]},Vr=Object.prototype.propertyIsEnumerable,Ur=Object.getOwnPropertySymbols,Hr=Ur?function(t){return null==t?[]:(t=Object(t),Ir(Ur(t),(function(r){return Vr.call(t,r)})))}:$r;var Rr=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n},Cr="[object Arguments]";var Lr=function(t){return _(t)&&y(t)==Cr},Br=Object.prototype,Yr=Br.hasOwnProperty,Gr=Br.propertyIsEnumerable,Wr=Lr(function(){return arguments}())?Lr:function(t){return _(t)&&Yr.call(t,"callee")&&!Gr.call(t,"callee")};var qr=function(){return!1},Jr=e((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,i=n&&n.exports===e?o.Buffer:void 0,s=(i?i.isBuffer:void 0)||qr;t.exports=s})),Kr=9007199254740991,Qr=/^(?:0|[1-9]\d*)$/;var Xr=function(t,r){var e=typeof t;return!!(r=null==r?Kr:r)&&("number"==e||"symbol"!=e&&Qr.test(t))&&t>-1&&t%1==0&&t<r},Zr=9007199254740991;var te=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Zr},re={};re["[object Float32Array]"]=re["[object Float64Array]"]=re["[object Int8Array]"]=re["[object Int16Array]"]=re["[object Int32Array]"]=re["[object Uint8Array]"]=re["[object Uint8ClampedArray]"]=re["[object Uint16Array]"]=re["[object Uint32Array]"]=!0,re["[object Arguments]"]=re["[object Array]"]=re["[object ArrayBuffer]"]=re["[object Boolean]"]=re["[object DataView]"]=re["[object Date]"]=re["[object Error]"]=re["[object Function]"]=re["[object Map]"]=re["[object Number]"]=re["[object Object]"]=re["[object RegExp]"]=re["[object Set]"]=re["[object String]"]=re["[object WeakMap]"]=!1;var ee=function(t){return _(t)&&te(t.length)&&!!re[y(t)]};var ne=function(t){return function(r){return t(r)}},ie=e((function(t,r){var e=r&&!r.nodeType&&r,i=e&&t&&!t.nodeType&&t,o=i&&i.exports===e&&n.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s})),oe=ie&&ie.isTypedArray,se=oe?ne(oe):ee,ue=Object.prototype.hasOwnProperty;var ae=function(r,e){var n=t(r),i=!n&&Wr(r),o=!n&&!i&&Jr(r),s=!n&&!i&&!o&&se(r),u=n||i||o||s,a=u?Rr(r.length,String):[],c=a.length;for(var f in r)!e&&!ue.call(r,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||s&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Xr(f,c))||a.push(f);return a},ce=Object.prototype;var fe=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||ce)};var he=function(t,r){return function(e){return t(r(e))}}(Object.keys,Object),le=Object.prototype.hasOwnProperty;var pe=function(t){if(!fe(t))return he(t);var r=[];for(var e in Object(t))le.call(t,e)&&"constructor"!=e&&r.push(e);return r};var de=function(t){return null!=t&&te(t.length)&&!z(t)};var ve=function(t){return de(t)?ae(t):pe(t)};var be=function(t){return Fr(t,ve,Hr)},ye=1,_e=Object.prototype.hasOwnProperty;var ge=function(t,r,e,n,i,o){var s=e&ye,u=be(t),a=u.length;if(a!=be(r).length&&!s)return!1;for(var c=a;c--;){var f=u[c];if(!(s?f in r:_e.call(r,f)))return!1}var h=o.get(t);if(h&&o.get(r))return h==r;var l=!0;o.set(t,r),o.set(r,t);for(var p=s;++c<a;){var d=t[f=u[c]],v=r[f];if(n)var b=s?n(v,d,f,r,t,o):n(d,v,f,t,r,o);if(!(void 0===b?d===v||i(d,v,e,n,o):b)){l=!1;break}p||(p="constructor"==f)}if(l&&!p){var y=t.constructor,_=r.constructor;y!=_&&"constructor"in t&&"constructor"in r&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(l=!1)}return o.delete(t),o.delete(r),l},me=B(o,"DataView"),we=B(o,"Promise"),je=B(o,"Set"),Ee=B(o,"WeakMap"),Oe=F(me),Se=F(pt),xe=F(we),Pe=F(je),Ae=F(Ee),Te=y;(me&&"[object DataView]"!=Te(new me(new ArrayBuffer(1)))||pt&&"[object Map]"!=Te(new pt)||we&&"[object Promise]"!=Te(we.resolve())||je&&"[object Set]"!=Te(new je)||Ee&&"[object WeakMap]"!=Te(new Ee))&&(Te=function(t){var r=y(t),e="[object Object]"==r?t.constructor:void 0,n=e?F(e):"";if(n)switch(n){case Oe:return"[object DataView]";case Se:return"[object Map]";case xe:return"[object Promise]";case Pe:return"[object Set]";case Ae:return"[object WeakMap]"}return r});var ze=Te,Me=1,Ne="[object Arguments]",ke="[object Array]",De="[object Object]",Fe=Object.prototype.hasOwnProperty;var Ie=function(r,e,n,i,o,s){var u=t(r),a=t(e),c=u?ke:ze(r),f=a?ke:ze(e),h=(c=c==Ne?De:c)==De,l=(f=f==Ne?De:f)==De,p=c==f;if(p&&Jr(r)){if(!Jr(e))return!1;u=!0,h=!1}if(p&&!h)return s||(s=new ir),u||se(r)?dr(r,e,n,i,o,s):kr(r,e,c,n,i,o,s);if(!(n&Me)){var d=h&&Fe.call(r,"__wrapped__"),v=l&&Fe.call(e,"__wrapped__");if(d||v){var b=d?r.value():r,y=v?e.value():e;return s||(s=new ir),o(b,y,n,i,s)}}return!!p&&(s||(s=new ir),ge(r,e,n,i,o,s))};var $e=function t(r,e,n,i,o){return r===e||(null==r||null==e||!_(r)&&!_(e)?r!=r&&e!=e:Ie(r,e,n,i,t,o))};var Ve=function(t,r){return $e(t,r)},Ue=Array.prototype.reverse;var He=function(t){return null==t?t:Ue.call(t)},Re=function(t,r){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */function Ce(t,r){function e(){this.constructor=t}Re(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function Le(t){return"function"==typeof t}var Be=!1,Ye={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;Be=t},get useDeprecatedSynchronousErrorHandling(){return Be}};function Ge(t){setTimeout((function(){throw t}),0)}var We={closed:!0,next:function(t){},error:function(t){if(Ye.useDeprecatedSynchronousErrorHandling)throw t;Ge(t)},complete:function(){}},qe=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();var Je=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Ke=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var r;if(!this.closed){var e,n=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s){n[s].remove(this)}if(Le(i))try{i.call(this)}catch(t){r=t instanceof Je?Qe(t.errors):[t]}if(qe(o)){s=-1;for(var u=o.length;++s<u;){var a=o[s];if(null!==(e=a)&&"object"==typeof e)try{a.unsubscribe()}catch(t){r=r||[],t instanceof Je?r=r.concat(Qe(t.errors)):r.push(t)}}}if(r)throw new Je(r)}},t.prototype.add=function(r){var e=r;if(!r)return t.EMPTY;switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var i=e._parentOrParents;if(null===i)e._parentOrParents=this;else if(i instanceof t){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Qe(t){return t.reduce((function(t,r){return t.concat(r instanceof Je?r.errors:r)}),[])}var Xe=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Ze=function(t){function r(e,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=We;break;case 1:if(!e){o.destination=We;break}if("object"==typeof e){e instanceof r?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new tn(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new tn(o,e,n,i)}return o}return Ce(r,t),r.prototype[Xe]=function(){return this},r.create=function(t,e,n){var i=new r(t,e,n);return i.syncErrorThrowable=!1,i},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},r}(Ke),tn=function(t){function r(r,e,n,i){var o,s=t.call(this)||this;s._parentSubscriber=r;var u=s;return Le(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==We&&(Le((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=o,s._error=n,s._complete=i,s}return Ce(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;Ye.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=Ye.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):Ge(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;Ge(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};Ye.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),Ye.useDeprecatedSynchronousErrorHandling)throw t;Ge(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!Ye.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return Ye.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Ge(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(Ze);var rn=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function en(t){return t}function nn(t){return 0===t.length?en:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var on=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,i=function(t,r,e){if(t){if(t instanceof Ze)return t;if(t[Xe])return t[Xe]()}return t||r||e?new Ze(t,r,e):new Ze(We)}(t,r,e);if(n?i.add(n.call(i,this.source)):i.add(this.source||Ye.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),Ye.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){Ye.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,i=r.isStopped;if(e||i)return!1;t=n&&n instanceof Ze?n:null}return!0}(t)?console.warn(r):t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=sn(r))((function(r,n){var i;i=e.subscribe((function(r){try{t(r)}catch(t){n(t),i&&i.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[rn]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:nn(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=sn(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function sn(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var un,an=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),cn=function(t){function r(r,e){var n=t.call(this)||this;return n.subject=r,n.subscriber=e,n.closed=!1,n}return Ce(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}(Ke),fn=function(t){function r(r){var e=t.call(this,r)||this;return e.destination=r,e}return Ce(r,t),r}(Ze),hn=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return Ce(r,t),r.prototype[Xe]=function(){return new fn(this)},r.prototype.lift=function(t){var r=new ln(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new an;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),i=0;i<e;i++)n[i].next(t)},r.prototype.error=function(t){if(this.closed)throw new an;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),i=0;i<e;i++)n[i].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new an;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new an;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new an;return this.hasError?(t.error(this.thrownError),Ke.EMPTY):this.isStopped?(t.complete(),Ke.EMPTY):(this.observers.push(t),new cn(this,t))},r.prototype.asObservable=function(){var t=new on;return t.source=this,t},r.create=function(t,r){return new ln(t,r)},r}(on),ln=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return Ce(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Ke.EMPTY},r}(hn),pn=function(t){function r(r){var e=t.call(this)||this;return e._value=r,e}return Ce(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return e&&!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new an;return this._value},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(hn),dn=e((function(t,r){var e;void 0!==(e=function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.permute=function t(r,e,n,i){void 0===r&&(r={}),e||(e=Object.keys(r)),n||(n={}),i||(i=[]);var o,s,u,a,c,f=Object.keys(r),h=function(){if(null==n[f[o]]){var h=r[f[o]];for(s=0;s<h.length;s++)!function(r,e,n,i,l){u=!1,l=r[f[o]].slice(s+1,r[f[o]].length),r[f[o]]=l,(a=Object.assign({},n))[f[o]]=h[s],Object.keys(a).length==e.length&&(u=!0),u&&(i.push(a),a={}),0==(c=Object.assign({},r))[f[o]].length&&delete c[f[o]],!u&&Object.keys(c).length>0&&t(c,e,a,i)}(r,e,n,i,void 0)}};for(o=0;o<f.length;o++)h();return i}}(0,r))&&(t.exports=e)})),vn=(un=dn)&&un.__esModule&&Object.prototype.hasOwnProperty.call(un,"default")?un.default:un,bn=s?s.isConcatSpreadable:void 0;var yn=function(r){return t(r)||Wr(r)||!!(bn&&r&&r[bn])};var _n=function t(r,e,n,i,o){var s=-1,u=r.length;for(n||(n=yn),o||(o=[]);++s<u;){var a=r[s];e>0&&n(a)?e>1?t(a,e-1,n,i,o):Dr(o,a):i||(o[o.length]=a)}return o};var gn=function(t){return(null==t?0:t.length)?_n(t,1):[]};class mn{constructor(t,r,e){this.grid=r,this.name=Ht(t,"name",e),"radius"in t?(this.max=Ht(t,"radius"),this.min=-this.max):"size"in t?(this.max=Ht(t,"size"),this.min=0):(this.min=Ht(t,"min",Number.NEGATIVE_INFINITY),this.max=Ht(t,"max",Number.POSITIVE_INFINITY))}get mid(){return Math.round((this.max+this.min)/2)}get center(){return{[this.name]:this.mid}}inRange(t){return t<=this.max&&t>=this.min}get extent(){return 1+this.max-this.min}}class wn{constructor(t,...r){this.dims=[],Array.isArray(t)?t.forEach((t,r)=>this.addDim(t,r)):[t,...r].forEach((t,r)=>this.addDim(t,r)),this.storage="sparse"}validPoint(t){if(!this.validCoordinate(t))return!1;for(let r=0;r<this.dims.length;++r){const e=this.dims[r];if(!this.dims[r].inRange(t[e.name]))return!1}return!0}validCoordinate(t){return"object"==typeof t&&this.dimNames.reduce((r,e)=>r&&e in t,!0)}get dims(){return this._dims||(this._dims=[]),this._dims}get dimNames(){return this.dims.map(({name:t})=>t)}set dims(t){this._dims=[]}get seedFunction(){return this._seedFunction}set seedFunction(t){this._seedFunction=t}get storage(){return this._storage}set storage(t){this._storage=t;let r=[];switch(t){case"sparse":r=new Map;break;case"dense":r=[]}this._store=r}get store(){return this._store}get center(){return this.dims.reduce((t,r)=>({...t,...r.center}),{})}get(t){let r=t;return"number"!=typeof r&&(r=this.flatten(t)),null===r?null:"sparse"===this.storage?(this.seedFunction&&!this._store.has(r)&&this.seedFunction&&this._store.set(r,this.seedFunction(r,this)),this._store.get(r)):"dense"===this.storage?(this.seedFunction&&(this._store.length<r||void 0===this._store[r])&&(this._store[r]=this.seedFunction(r,this)),this._store[r]):null}set(t,r){let e=t,n=t;if("number"!=typeof n?n=this.flatten(t):e=null,null===n)return;"sparse"===this.storage&&this._store.set(n,r),"dense"===this.storage&&(this._store[n]=r);const i=this.get(n);Ve(i,e)||(this._changes&&(e||(e=this.unflatten(n)),this.changes.next({coord:e,value:r,prev:i,grid:this})),this._subject&&this._subject.next(this))}near(t,r=!1){if(!this.validCoordinate(t))return[];if("number"==typeof t&&(t=this.unflatten(t)),r)return gn(this.dimNames.map(r=>[{...t,[r]:t[r]+1},{...t,[r]:t[r]-1}]));const e=this.dimNames.map(r=>({[r]:[t[r]-1,t[r],t[r]+1]})).reduce((t,r)=>Object.assign(t,r),{});return vn.permute(e)}addDim(t,r=0){this.dims.push(new mn(t,this,r))}weight(t){return t>=0?this.dims[t].extent*this.weight(t-1):1}flatten(t){return this.dims.reduce((r,e,n)=>{if(null===r)return r;const{name:i,min:o}=e,s=i in t?t[i]:o;return e.inRange(s)?r+(s-o)*this.weight(n-1):null},0)}unflatten(t){return He([...this.dims]).reduce(([t,r],e,n)=>{if(null===t)return[null];const{name:i,min:o}=e;if(n===this.dims.length-1)return[{...t,[i]:r+o},0];const s=this.dims.length-n-2,u=this.weight(s),a=Math.floor(r/u);return[{...t,[i]:a+o},r-a*u]},[{},t])[0]}get changes(){return this._changes||(this._changes=new hn),this._changes}subject(){return this._subject||(this._subject=new pn(this)),this._subject}}var jn=Math.floor,En=Math.random;var On=function(t,r){return t+jn(En()*(r-t+1))};var Sn=function(t){var r=t.length;return r?t[On(0,r-1)]:void 0};var xn=function(t,r){return zt(r,(function(r){return t[r]}))};var Pn=function(t){return null==t?[]:xn(t,ve(t))};var An=function(t){return Sn(Pn(t))};var Tn=function(r){return(t(r)?Sn:An)(r)};var zn=function(t,r,e,n){for(var i=t.length,o=e+(n?1:-1);n?o--:++o<i;)if(r(t[o],o,t))return o;return-1};var Mn=function(t){return t!=t};var Nn=function(t,r,e){for(var n=e-1,i=t.length;++n<i;)if(t[n]===r)return n;return-1};var kn=function(t,r,e){return r==r?Nn(t,r,e):zn(t,Mn,e)};var Dn=function(t,r){return!!(null==t?0:t.length)&&kn(t,r,0)>-1};var Fn=function(t,r,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(r,t[n]))return!0;return!1},In=200;var $n=function(t,r,e,n){var i=-1,o=Dn,s=!0,u=t.length,a=[],c=r.length;if(!u)return a;e&&(r=zt(r,ne(e))),n?(o=Fn,s=!1):r.length>=In&&(o=hr,s=!1,r=new cr(r));t:for(;++i<u;){var f=t[i],h=null==e?f:e(f);if(f=n||0!==f?f:0,s&&h==h){for(var l=c;l--;)if(r[l]===h)continue t;a.push(f)}else o(r,h,n)||a.push(f)}return a};var Vn=function(t){return t};var Un=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},Hn=Math.max;var Rn=function(t,r,e){return r=Hn(void 0===r?t.length-1:r,0),function(){for(var n=arguments,i=-1,o=Hn(n.length-r,0),s=Array(o);++i<o;)s[i]=n[r+i];i=-1;for(var u=Array(r+1);++i<r;)u[i]=n[i];return u[r]=e(s),Un(t,this,u)}};var Cn=function(t){return function(){return t}},Ln=function(){try{var t=B(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Bn=Ln?function(t,r){return Ln(t,"toString",{configurable:!0,enumerable:!1,value:Cn(r),writable:!0})}:Vn,Yn=800,Gn=16,Wn=Date.now;var qn=function(t){var r=0,e=0;return function(){var n=Wn(),i=Gn-(n-e);if(e=n,i>0){if(++r>=Yn)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(Bn);var Jn=function(t){return _(t)&&de(t)},Kn=function(t,r){return qn(Rn(t,r,Vn),t+"")}((function(t,r){return Jn(t)?$n(t,_n(r,1,Jn,!0)):[]})),Qn=9007199254740991,Xn=Math.floor;var Zn=function(t,r){var e="";if(!t||r<1||r>Qn)return e;do{r%2&&(e+=t),(r=Xn(r/2))&&(t+=t)}while(r);return e};var ti=function(t,r,e){var n=-1,i=t.length;r<0&&(r=-r>i?0:i+r),(e=e>i?i:e)<0&&(e+=i),i=r>e?0:e-r>>>0,r>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+r];return o};var ri=function(t,r,e){var n=t.length;return e=void 0===e?n:e,!r&&e>=n?t:ti(t,r,e)},ei=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ni=function(t){return ei.test(t)};var ii=function(t){return function(r){return null==r?void 0:r[t]}}("length"),oi="[\\ud800-\\udfff]",si="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ui="\\ud83c[\\udffb-\\udfff]",ai="[^\\ud800-\\udfff]",ci="(?:\\ud83c[\\udde6-\\uddff]){2}",fi="[\\ud800-\\udbff][\\udc00-\\udfff]",hi="(?:"+si+"|"+ui+")"+"?",li="[\\ufe0e\\ufe0f]?"+hi+("(?:\\u200d(?:"+[ai,ci,fi].join("|")+")[\\ufe0e\\ufe0f]?"+hi+")*"),pi="(?:"+[ai+si+"?",si,ci,fi,oi].join("|")+")",di=RegExp(ui+"(?="+ui+")|"+pi+li,"g");var vi=function(t){for(var r=di.lastIndex=0;di.test(t);)++r;return r};var bi=function(t){return ni(t)?vi(t):ii(t)};var yi=function(t){return t.split("")},_i="[\\ud800-\\udfff]",gi="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",mi="\\ud83c[\\udffb-\\udfff]",wi="[^\\ud800-\\udfff]",ji="(?:\\ud83c[\\udde6-\\uddff]){2}",Ei="[\\ud800-\\udbff][\\udc00-\\udfff]",Oi="(?:"+gi+"|"+mi+")"+"?",Si="[\\ufe0e\\ufe0f]?"+Oi+("(?:\\u200d(?:"+[wi,ji,Ei].join("|")+")[\\ufe0e\\ufe0f]?"+Oi+")*"),xi="(?:"+[wi+gi+"?",gi,ji,Ei,_i].join("|")+")",Pi=RegExp(mi+"(?="+mi+")|"+xi+Si,"g");var Ai=function(t){return t.match(Pi)||[]};var Ti=function(t){return ni(t)?Ai(t):yi(t)},zi=Math.ceil;var Mi=function(t,r){var e=(r=void 0===r?" ":Dt(r)).length;if(e<2)return e?Zn(r,t):r;var n=Zn(r,zi(t/bi(r)));return ni(r)?ri(Ti(n),0,t).join(""):n.slice(0,t)};var Ni=function(t){var r=Kt(t),e=r%1;return r==r?e?r-e:r:0},ki=Math.ceil,Di=Math.floor;var Fi=function(t,r,e){t=Ft(t);var n=(r=Ni(r))?bi(t):0;if(!r||n>=r)return t;var i=(r-n)/2;return Mi(Di(i),e)+t+Mi(ki(i),e)};var Ii=function(t,r,e){if(!O(e))return!1;var n=typeof r;return!!("number"==n?de(e)&&Xr(r,e.length):"string"==n&&r in e)&&it(e[r],t)},$i=parseFloat,Vi=Math.min,Ui=Math.random;var Hi=function(t,r,e){if(e&&"boolean"!=typeof e&&Ii(t,r,e)&&(r=e=void 0),void 0===e&&("boolean"==typeof r?(e=r,r=void 0):"boolean"==typeof t&&(e=t,t=void 0)),void 0===t&&void 0===r?(t=0,r=1):(t=Kt(t),void 0===r?(r=t,t=0):r=Kt(r)),t>r){var n=t;t=r,r=n}if(e||t%1||r%1){var i=Ui();return Vi(t+i*(r-t+$i("1e-"+((i+"").length-1))),r)}return On(t,r)};const Ri=`abcdefghijklmnoparstuvwxyz${"abcdefghijklmnoparstuvwxyz".toUpperCase()}`.split("");class Ci{constructor(t,r,e,n){this.branches=e,this.x=t,this.y=r,this.id=Tn(Ri),this.parent=n}}return{Grid:wn,Branches:class{constructor(t,r,e,n=0){this._grid=new wn({name:"x",size:t},{name:"y",size:r}),this.minLength=e,this.maxLength=n,this.nodes=new Map}newId(t=""){const r=[];this.nodes.forEach(({id:t})=>r.push(t));const e=Kn(Ri.map(r=>t+r),r);if(!e.length){const r=Ri.indexOf(t)+1;return this.newId(Ri[r])}return Tn(e)}get grid(){return this._grid}seed(t){(t||[this.grid.center]).forEach((t,r)=>{this.addNode(t)})}diff(t,r){return this.grid.dimNames.reduce((e,n)=>({...e,[n]:r[n]-t[n]}),{})}sum(t,r){return this.grid.dimNames.reduce((e,n)=>({...e,[n]:r[n]+t[n]}),{})}drawStem(t,r){if(!this._grid.validPoint(t))return!1;let e=null,n=this.sum(t,r);if(!this.grid.validPoint(n))return!1;const i=Hi(this.minLength,this.maxLength);for(let o=0;o<i&&(this.grid.validPoint(n)&&!this.grid.get(n));++o)this.grid.set(n,t.id),e=n,n=this.sum(n,r);return this.addNode(e,t),!0}addNode({x:t,y:r},e){if(!this.grid.validPoint({x:t,y:r}))return;const n=new Ci(t,r,this,e),i=this._grid.flatten(n);this.nodes.has(i)||(this.nodes.set(i,n),this.grid.set(n,n.id))}branchNode(t){const r=this._grid.near(t,!0).filter(t=>!t.done&&this.grid.validPoint(t)&&!this.grid.get(t));if(!r.length)return void(t.done=!0);let e=!1;r.forEach(r=>{this.drawStem(t,this.diff(t,r))&&(e=!0)}),e||(t.done=!0)}cycle(){const t=Array.from(this.nodes.values()).filter(t=>!t.done);return!!t.length&&(t.forEach(t=>this.branchNode(t)),!0)}expand(){this.nodes.forEach(t=>{t.done||this.branchNode(t)})}toString(){const t=[],r=[];for(let t=this.grid.dims[0].min;t<this.grid.dims[0].max;++t)r.push(Fi(t,4));t.push(r.join(" | "));for(let r=this.grid.dims[1].min;r<this.grid.dims[1].max;++r){const e=[];for(let t=this.grid.dims[0].min;t<this.grid.dims[0].max;++t)e.push(Fi(`${this.grid.get({x:t,y:r})||""}`,4));t.push(e.join(" | "))}return t.join("\n")}}}}));
